/*1. Crea una base de datos de nombre “Laboratorio Quimico”.
2. Crea una tabla de nombre LQ_Elementos, con las columnas simbolo (dos caracteres,
clave primaria) y nombre (Cadena variable de tamaño 15). Ninguna admite nulos.
3. Crea otra tabla llamada LQ_Tipos_Compuesto con dos columnas: tipo (entero corto,
clave primaria, identidad) y denominacion (cadena variable de tamaño 30). Ninguna
admite nulos. Define denominacion como clave alternativa.
4. Crea otra tabla llamada LQ_Moleculas con las columnas nombre_clasico (cadena
variable longitud 30), nombre_IUPAC (cadena variable longitud 30), color (cadena
variable longitud 20), densidad (decimal de dos cifras enteras y tres decimales),
punto_fusion(real), punto_ebullicion (real). Ninguna admite nulos excepto densidad y
color.
punto_fusion y punto_ebullicion toman valores positivos. El valor de punto_ebullición
ha de ser superior a punto_fusion.
5. Añade dos nuevas columnas a la tabla LQ_Elementos: numero_atomico (entero corto,
sin nulos) y masa_atomica (tres cifras enteras y cinco decimales, admite nulos). El
número atómico no debe admitir valores inferiores a uno ni superiores a 300 y será clave
alternativa.
6. Añade una nueva columna a LQ_Moleculas llamada codigo. Será de tipo entero,
identidad y defínela como clave primaria.
7. Crea una nueva tabla que relacione LQ_Elementos con LQ_Moleculas, llámala
LQ_MoleculasElementos. Añade una columna numero que indique el subíndice del
elemento en la molécula (entero corto sin nulos, valor mínimo 1). Crea las restricciones de
clave primaria y ajena que sean necesarias.
8. Añade una nueva columna a LQ_Moleculas llamada tipo que la relacione con
LQ_Tipos_Compuesto. Puede admitir valores nulos. Añade la restricción de clave ajena
necesaria.
9. Crea una tabla de nombre LQ_Colores para normalizar los colores y crea una clave ajena
en LQ_Moleculas que relacione la columna color con esta nueva tabla.
10. Añade una nueva columna a LQ_Elementos de nombre tipo, que puede tomar
únicamente los siguientes valores: Metal, No metal, Gas noble, Tierra rara
11. Propón una solución para registrar datos sobre las reacciones químicas. En una reacción
química intervienen varias moléculas como reactivos y se obtienen otras como productos.
Es importante saber las cantidades relativas de cada reactivo y cada producto. Una
reacción puede absorber energía o liberarla, también nos interesa saber este dato. */

GO
CREATE DATABASE Laboratorio_Quimico
GO
USE Laboratorio_Quimico
GO
GO
CREATE TABLE LQ_Elementos(
simbolo char(2) NOT NULL
,CONSTRAINT PK_Elementos PRIMARY KEY(simbolo)
,nombre varchar(15) NOT NULL
)
--Identity primer 1 base segundo 1 incremento--
CREATE TABLE LQ_Tipos_Compuestos(
tipo smallInt IDENTITY(1,1) NOT NULL
,CONSTRAINT PK_Tipos_Compuestos PRIMARY KEY(tipo)
,denominacion varchar(30)
,CONSTRAINT UQ_denominacion UNIQUE(denominacion)
)
CREATE TABLE LQ_Colores(
color varchar(20) NOT NULL
,CONSTRAINT PK_Colores PRIMARY KEY (color) 
)
CREATE TABLE LQ_Moleculas(
nombre_clasico varchar(30) NOT NULL
,nombre_IUPAC varchar(30) NOT NULL
,color varchar(20) NULL
,densidad decimal(5,3) NULL
,punto_fusion real NOT NULL
,punto_ebullicion real NOT NULL
,CONSTRAINT FK_Moleculas_Colores FOREIGN KEY(color) REFERENCES LQ_Colores(color)  ON DELETE NO ACTION ON UPDATE NO ACTION
,CONSTRAINT CK_Ebullcion CHECK (punto_ebullicion>punto_fusion)
)
ALTER TABLE LQ_Moleculas ADD numero_atomico smallInt NOT NULL, masa_atomica float NOT NULL,
CONSTRAINT UQ_NumeroAtomico UNIQUE(numero_atomico), CONSTRAINT CK_numeroAtomico CHECK (numero_atomico BETWEEN 1 AND 300)

ALTER TABLE LQ_Moleculas ADD codigo smallInt IDENTITY(1,1) NOT NULL,CONSTRAINT PK_codigo PRIMARY KEY(codigo)

CREATE TABLE LQ_MoleculasElementos(
numero smallInt NOT NULL 
,simbolo char(2) NOT NULL
,codigo smallInt NOT NULL
,CONSTRAINT FK_Elementos_Moleculas FOREIGN KEY (simbolo) REFERENCES LQ_Elementos(simbolo)  ON DELETE NO ACTION ON UPDATE NO ACTION
,CONSTRAINT FK_Moleculas FOREIGN KEY (codigo) REFERENCES LQ_Moleculas(codigo)  ON DELETE NO ACTION ON UPDATE NO ACTION
,CONSTRAINT PK_LQ_Moleculas_Elementos PRIMARY KEY (codigo,simbolo)
)

ALTER TABLE LQ_Moleculas ADD tipo smallInt NULL, CONSTRAINT FK_Elementos FOREIGN KEY (tipo) REFERENCES LQ_Tipos_Compuestos(tipo)  ON DELETE NO ACTION ON UPDATE NO ACTION

ALTER TABLE LQ_Elementos ADD tipo varchar(15) NOT NULL, CONSTRAINT CK_tipo CHECK (tipo IN('Metal', 'No Metal', 'GasN oble', 'Tierra Rara'))


CREATE TABLE LQ_Reacciones_Moleculas(
codigo_molecula smallInt NOT NULL
CONSTRAINT FK_molecula FOREIGN KEY(codigo_molecula) REFERENCES LQ_Moleculas(codigo)
,id_reaccion smallInt NOT NULL
CONSTRAINT FK_reacciones FOREIGN KEY(id_reaccion) REFERENCES LQ_Reacciones(ID)
,ReactivoOProducto bit NOT NULL
,Cantidad_Reactivo smallInt NOT NULL
,Cantidad_Producto smallInt NOT NULL
,CONSTRAINT Reacciones_Moleculas PRIMARY KEY (codigo_molecula,id_reaccion)
)

CREATE TABLE LQ_Reacciones(
ID smallInt NOT NULL
,AbsorbeOLibera_Energia Bit NOT NULL
,CONSTRAINT PK_Reacciones PRIMARY KEY (ID)
)
GO
